<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimensional Permit | Neural Link</title>
    
    <!-- 字体引入 -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* --- 核心色彩库 --- */
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-pink: #ff0055;
            --neon-yellow: #ffee00;
            --neon-green: #00ff9d;
            --neon-orange: #ff9a00;
            
            --hud-bg: rgba(8, 8, 10, 0.9);
            --font-title: 'Orbitron', sans-serif;
            --font-mono: 'Share Tech Mono', monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

        body {
            background-color: #020202;
            color: var(--neon-blue);
            font-family: var(--font-mono);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            cursor: crosshair; /* 全局准星 */
        }

        /* --- 背景层：星空画布 --- */
        #warp-canvas { 
            position: fixed; top: 0; left: 0; 
            z-index: 0; 
            width: 100%; height: 100%;
        }
        
        /* 暗角与扫描线 */
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 50%, #000 100%);
            z-index: 2; pointer-events: none;
        }
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            z-index: 3; pointer-events: none; opacity: 0.3;
        }

        /* --- RGB 流光边界容器 --- */
        .card-wrapper {
            position: relative;
            width: 780px;
            max-width: 95%;
            padding: 2px; /* 边框更细致 */
            z-index: 100; /* 确保在最上层 */
            border-radius: 15px;
            transform-style: preserve-3d;
            transition: transform 0.05s ease-out; /* 更跟手的3D效果 */
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 30px), calc(100% - 30px) 100%, 
                60px 100%, 0 calc(100% - 60px), 0 20px
            );
        }

        /* 流光动画背景 */
        .card-wrapper::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: conic-gradient(
                transparent, var(--neon-blue), var(--neon-purple), 
                var(--neon-pink), var(--neon-orange), var(--neon-yellow), 
                var(--neon-green), var(--neon-blue), transparent
            );
            animation: borderRotate 4s linear infinite;
            z-index: -1;
        }

        /* --- 全息卡片本体 --- */
        .holo-card {
            background: var(--hud-bg);
            backdrop-filter: blur(12px); /* 毛玻璃增强 */
            width: 100%; height: 100%;
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 30px), calc(100% - 30px) 100%, 
                60px 100%, 0 calc(100% - 60px), 0 20px
            );
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .card-inner {
            padding: 40px;
            background: 
                linear-gradient(90deg, rgba(0,243,255,0.03) 1px, transparent 1px) 0 0 / 20px 20px,
                linear-gradient(rgba(0,243,255,0.03) 1px, transparent 1px) 0 0 / 20px 20px;
        }

        /* --- 头部区域 --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 2px solid rgba(0,243,255,0.2);
            padding-bottom: 20px;
            margin-bottom: 25px;
        }

        .sys-title-box { position: relative; pointer-events: none; }
        
        .sys-title {
            font-family: var(--font-title);
            font-size: 1.8rem;
            font-weight: 900;
            color: #fff;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        
        /* 语言切换按钮 - 修复点击问题 */
        .sys-badge {
            background: rgba(188, 19, 254, 0.15); 
            border: 1px solid var(--neon-purple);
            color: #fff;
            padding: 6px 12px; 
            font-weight: bold; 
            font-size: 0.75rem;
            box-shadow: 0 0 10px rgba(188, 19, 254, 0.2);
            cursor: pointer !important; /* 强制手型 */
            transition: 0.3s;
            pointer-events: auto; /* 确保接收点击 */
            z-index: 101;
        }
        .sys-badge:hover {
            background: var(--neon-purple);
            color: #000;
            box-shadow: 0 0 20px var(--neon-purple);
            transform: scale(1.05);
        }

        /* --- 无人机装饰 --- */
        .drone-unit {
            position: absolute; right: 20px; top: -50px;
            width: 100px; height: 100px;
            z-index: 50;
            animation: float 6s ease-in-out infinite;
            pointer-events: none; /* 防止遮挡下方按钮 */
        }
        
        .drone-core {
            width: 60px; height: 60px;
            background: #050505;
            border: 2px solid var(--neon-blue);
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            box-shadow: 0 0 25px var(--neon-blue);
        }
        .drone-lens {
            width: 20px; height: 20px;
            background: var(--neon-pink);
            border-radius: 50%;
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px var(--neon-pink);
            animation: pulseEye 2s infinite;
        }
        .drone-wing {
            position: absolute; top: 50%; left: 50%;
            width: 140%; height: 140%;
            border: 1px dashed var(--neon-green);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: spin 8s linear infinite;
            opacity: 0.6;
        }

        /* --- 数据行 --- */
        .row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px 15px; margin-bottom: 10px;
            background: linear-gradient(90deg, rgba(255,255,255,0.03), transparent);
            border-left: 3px solid var(--neon-blue);
            transition: 0.3s;
        }
        .row:hover {
            background: linear-gradient(90deg, rgba(0,243,255,0.15), transparent);
            border-left-color: var(--neon-pink);
            transform: translateX(5px);
            box-shadow: -5px 0 15px rgba(0,243,255,0.1);
        }

        .label { color: #888; font-size: 0.8rem; letter-spacing: 2px; }
        .val { font-family: var(--font-title); font-size: 1.1rem; color: #fff; text-shadow: 0 0 5px var(--neon-blue); }
        .scramble-text { min-width: 120px; text-align: right; }

        /* --- 按钮组 --- */
        .action-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;
            margin-top: 35px;
        }

        .btn {
            position: relative;
            background: rgba(0,243,255,0.05);
            border: 1px solid rgba(0,243,255,0.3);
            color: var(--neon-blue);
            padding: 15px;
            font-family: var(--font-title);
            text-transform: uppercase;
            font-size: 0.8rem;
            font-weight: bold;
            overflow: hidden;
            transition: 0.3s;
            text-decoration: none;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            cursor: pointer !important;
        }

        .btn::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px;
            background: var(--neon-blue); transform: scaleX(0); transition: 0.3s;
        }

        .btn:hover {
            background: rgba(0,243,255,0.15);
            border-color: var(--neon-blue);
            color: #fff;
            box-shadow: 0 0 20px rgba(0,243,255,0.4);
        }
        .btn:hover::after { transform: scaleX(1); }

        .btn-danger { border-color: rgba(255,0,85,0.3); color: var(--neon-pink); }
        .btn-danger::after { background: var(--neon-pink); }
        .btn-danger:hover {
            background: rgba(255,0,85,0.15);
            border-color: var(--neon-pink);
            color: #fff;
            box-shadow: 0 0 20px rgba(255,0,85,0.4);
        }

        /* --- 爆炸粒子与冲击波 --- */
        .particle {
            position: absolute; pointer-events: none; border-radius: 50%;
            mix-blend-mode: screen;
        }
        .shockwave {
            position: absolute; pointer-events: none; border-radius: 50%;
            border: 2px solid var(--neon-blue);
            transform: translate(-50%, -50%);
            animation: shockwaveAnim 0.6s ease-out forwards;
        }

        /* --- 关键帧 --- */
        @keyframes borderRotate { 100% { transform: rotate(360deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes pulseEye { 0%, 100% { opacity: 1; box-shadow: 0 0 15px var(--neon-pink); } 50% { opacity: 0.5; box-shadow: 0 0 5px var(--neon-pink); } }
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes shockwaveAnim { 0% { width: 0; height: 0; opacity: 1; border-width: 5px; } 100% { width: 300px; height: 300px; opacity: 0; border-width: 0; } }

        /* 移动端 */
        @media (max-width: 768px) {
            .card-wrapper { width: 95%; }
            .action-grid { grid-template-columns: 1fr; }
            .drone-unit { transform: scale(0.7); top: -40px; right: -10px; }
            .sys-title { font-size: 1.3rem; }
        }
    </style>
</head>
<body>

    <!-- 背景层 -->
    <canvas id="warp-canvas"></canvas>
    <div class="vignette"></div>
    <div class="scanlines"></div>

    <!-- 3D 容器 -->
    <div class="card-wrapper" id="tiltCard">
        
        <!-- 无人机 -->
        <div class="drone-unit">
            <div class="drone-wing"></div>
            <div class="drone-core">
                <div class="drone-lens"></div>
            </div>
        </div>

        <div class="holo-card">
            <div class="card-inner">
                <div class="header">
                    <div class="sys-title-box">
                        <div class="sys-title">DIMENSIONAL PERMIT</div>
                        <div style="color: var(--neon-purple); letter-spacing: 3px; font-size: 0.6rem; margin-top: 8px;">
                            SECURE PROTOCOL v9.0 // <span id="timeVal">00:00:00</span>
                        </div>
                    </div>
                    <!-- 修复：z-index 和 cursor -->
                    <div class="sys-badge" id="langBtn">CN / EN</div>
                </div>

                <div class="data-grid">
                    <div class="row">
                        <span class="label" data-key="target">TARGET DOMAIN</span>
                        <span class="val scramble-text" id="domainVal" style="color: var(--neon-yellow)">DETECTING...</span>
                    </div>
                    <div class="row">
                        <span class="label" data-key="admin">NEURAL ARCHITECT</span>
                        <span class="val" id="adminVal" style="color: var(--neon-green)">ROOT_USER</span>
                    </div>
                    <div class="row">
                        <span class="label" data-key="status">LINK STATUS</span>
                        <span class="val" style="color: var(--neon-blue)">100% STABLE</span>
                    </div>
                    <div class="row" style="border-left-color: var(--neon-orange)">
                        <span class="label" data-key="icp">LICENSE ID</span>
                        <!-- 自动生成日期ICP -->
                        <span class="val" id="icpVal">LOADING...</span>
                    </div>
                </div>

                <div class="action-grid">
                    <a href="#" id="enterBtn" class="btn">
                        <i class="fas fa-rocket"></i> <span data-key="btn_enter">INITIATE JUMP</span>
                    </a>
                    <button class="btn" id="contactBtn">
                        <i class="fas fa-satellite-dish"></i> <span data-key="btn_contact">SIGNAL</span>
                    </button>
                    <button class="btn btn-danger" id="verifyBtn">
                        <i class="fas fa-biohazard"></i> <span data-key="btn_verify">SYS.CHECK</span>
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 20px; color: #444; font-size: 0.6rem; letter-spacing: 2px;">
                    // UNAUTHORIZED ACCESS WILL BE TERMINATED //
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ==========================================
           1. 星际穿越背景 (Warp Drive Starfield)
           ========================================== */
        const canvas = document.getElementById('warp-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        
        // 状态变量
        let warpSpeed = 0; // 额外的加速速度
        let baseSpeed = 2; // 基础巡航速度
        let stars = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initStars();
        }

        class Star {
            constructor() {
                this.init();
            }
            init() {
                this.x = (Math.random() - 0.5) * width; // 居中坐标系
                this.y = (Math.random() - 0.5) * height;
                this.z = Math.random() * width; // 深度
            }
            update() {
                // 速度 = 基础 + 点击加速
                let s = baseSpeed + warpSpeed;
                this.z -= s;

                if (this.z <= 0) this.init();
            }
            draw() {
                // 透视投影计算
                let sx = (this.x / this.z) * width + width/2;
                let sy = (this.y / this.z) * height + height/2;
                
                // 计算大小和颜色透明度
                let r = (width - this.z) * 0.0015;
                let opacity = 1 - (this.z / width);

                ctx.beginPath();
                ctx.fillStyle = `rgba(0, 243, 255, ${opacity})`;
                
                // 如果处于加速状态，绘制线条（拉丝效果）
                if (warpSpeed > 5) {
                    let tailLength = warpSpeed * 2;
                    let sx_prev = (this.x / (this.z + tailLength)) * width + width/2;
                    let sy_prev = (this.y / (this.z + tailLength)) * height + height/2;
                    
                    ctx.strokeStyle = `rgba(0, 243, 255, ${opacity * 0.5})`;
                    ctx.lineWidth = r;
                    ctx.moveTo(sx_prev, sy_prev);
                    ctx.lineTo(sx, sy);
                    ctx.stroke();
                } else {
                    ctx.arc(sx, sy, r > 0 ? r : 0, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function initStars() {
            stars = [];
            for(let i=0; i<800; i++) stars.push(new Star());
        }

        function animateBg() {
            // 拖尾效果：黑色背景带一点透明度
            ctx.fillStyle = 'rgba(2, 2, 2, 0.4)'; 
            ctx.fillRect(0, 0, width, height);

            stars.forEach(s => { s.update(); s.draw(); });

            // 速度衰减：让加速效果慢慢停下来
            if (warpSpeed > 0) {
                warpSpeed *= 0.96;
            }

            requestAnimationFrame(animateBg);
        }

        window.addEventListener('resize', resize);
        resize();
        animateBg();

        /* ==========================================
           2. 赛博爆炸特效 (Interaction)
           ========================================== */
        document.addEventListener('mousedown', (e) => {
            // 1. 背景加速 (Warp Speed)
            warpSpeed = 50; 

            // 2. 粒子爆炸
            createExplosion(e.clientX, e.clientY);

            // 3. 冲击波
            createShockwave(e.clientX, e.clientY);
        });

        function createShockwave(x, y) {
            const wave = document.createElement('div');
            wave.classList.add('shockwave');
            wave.style.left = x + 'px';
            wave.style.top = y + 'px';
            document.body.appendChild(wave);
            setTimeout(() => wave.remove(), 600);
        }

        function createExplosion(x, y) {
            const colors = ['#00f3ff', '#bc13fe', '#ff0055', '#ffee00'];
            for (let i = 0; i < 25; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                document.body.appendChild(p);

                const color = colors[Math.floor(Math.random() * colors.length)];
                const size = Math.random() * 4 + 2;
                
                p.style.width = `${size}px`; p.style.height = `${size}px`;
                p.style.background = color;
                p.style.boxShadow = `0 0 ${size*2}px ${color}`;
                p.style.left = `${x}px`; p.style.top = `${y}px`;

                // 物理运动计算
                const angle = Math.random() * Math.PI * 2;
                const velocity = 100 + Math.random() * 100;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                p.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                ], { duration: 800, easing: 'cubic-bezier(0,.9,.57,1)', fill: 'forwards' });

                setTimeout(() => p.remove(), 800);
            }
        }

        /* ==========================================
           3. 3D 视差 (Parallax)
           ========================================== */
        const card = document.getElementById('tiltCard');
        document.addEventListener('mousemove', (e) => {
            const xAxis = (window.innerWidth / 2 - e.pageX) / 30;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 30;
            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });

        /* ==========================================
           4. 内容逻辑 & 文字特效
           ========================================== */
        // 黑客文字解密类
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.chars[Math.floor(Math.random() * this.chars.length)];
                            this.queue[i].char = char;
                        }
                        output += `<span style="color: #444">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
        }

        // 语言包
        const dictionary = {
            en: {
                target: "TARGET DOMAIN",
                admin: "NEURAL ARCHITECT",
                status: "LINK STATUS",
                icp: "LICENSE ID",
                btn_enter: "INITIATE JUMP",
                btn_contact: "SIGNAL",
                btn_verify: "SYS.CHECK"
            },
            zh: {
                target: "目标维度",
                admin: "神经架构师",
                status: "链路状态",
                icp: "备案许可",
                btn_enter: "启动跃迁",
                btn_contact: "发送信号",
                btn_verify: "系统自检"
            }
        };

        let currentLang = 'en';
        const domainScrambler = new TextScramble(document.getElementById('domainVal'));
        const adminScrambler = new TextScramble(document.getElementById('adminVal'));

        // 获取自动化数据
        function getAutoData() {
            // 1. 自动获取域名
            let domain = window.location.hostname.toUpperCase();
            if(!domain) domain = "LOCAL.DIMENSION";
            
            // 2. 自动获取日期生成ICP
            const now = new Date();
            const yyyy = now.getFullYear();
            const mm =String(now.getMonth() + 1).padStart(2, '0');
            const dd = String(now.getDate()).padStart(2, '0');
            const icp = `ICP-${yyyy}${mm}${dd}`;

            return { domain, icp };
        }

        function updateUI() {
            const data = getAutoData();
            const t = dictionary[currentLang];
            
            // 更新静态标签
            document.querySelectorAll('[data-key]').forEach(el => {
                el.innerText = t[el.getAttribute('data-key')];
            });

            // 更新动态值
            domainScrambler.setText(data.domain);
            document.getElementById('icpVal').innerText = data.icp; // 更新ICP
            
            const adminName = currentLang === 'en' ? "ROOT_USER_01" : "最高权限者";
            adminScrambler.setText(adminName);

            // 链接自动指向当前页面或参数
            const p = new URLSearchParams(window.location.search);
            let targetUrl = p.get('target') || '#';
            document.getElementById('enterBtn').href = targetUrl;
        }

        // 语言切换事件
        document.getElementById('langBtn').addEventListener('click', (e) => {
            e.stopPropagation(); // 防止触发背景爆炸（可选，如果希望同时也爆炸可以去掉）
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            updateUI();
            
            // 按钮本身的反馈动画
            const btn = e.target;
            btn.style.transform = "scale(1.1)";
            setTimeout(()=>btn.style.transform = "scale(1)", 100);
            
            // 小范围爆炸
            createExplosion(e.clientX, e.clientY);
        });

        // 自检按钮
        document.getElementById('verifyBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            const btn = e.currentTarget;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> SCANNING...`;
            btn.style.borderColor = "var(--neon-yellow)";
            
            setTimeout(() => {
                btn.innerHTML = `<i class="fas fa-check"></i> SECURE`;
                btn.style.color = "var(--neon-green)";
                btn.style.borderColor = "var(--neon-green)";
                btn.style.boxShadow = "0 0 15px var(--neon-green)";
                
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.style = ""; // Reset
                }, 2000);
            }, 1500);
        });

        // 时间跳动
        setInterval(() => {
            const now = new Date();
            document.getElementById('timeVal').innerText = now.toLocaleTimeString();
        }, 1000);

        // 启动
        setTimeout(updateUI, 300);

    </script>
</body>
</html>